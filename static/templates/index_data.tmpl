<!doctype html>
<HTML>
<title>
	JoshandLinz
</title>

	<link rel="icon" type="image/png" href="/static/favicon.ico">	
	<link rel="stylesheet" href="/static/css/base.css" type="text/css">
    <link rel="stylesheet" href="/static/css/normalize.css" type="text/css">


    <!-- Add in Prod
    	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-darkness/jquery-ui.min.css">
    	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>   
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    !-->
    <!--Instead of local !-->
    <link rel="stylesheet" href="/static/css/ui-darkness/jquery-ui-1.10.4.custom.css">
    <script type="text/javascript" src="/js/lib/jquery-1.10.2.min.js"></script> 
    <script type="text/javascript" src="/js/lib/jquery-ui-1.10.4.min.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
    <script type="text/javascript" src="/js/event.js"></script>
</head>

<body>		

%if display_type == "Main": 
	<div id = "container">
		<div id = "site_title">${main_tag}</div>

		<div id = "tag_preview">
			%for parent_tag, sub_tag in sub_tags:
				
				%try:
					%for id, name, image_location, thumb_location, date_added, date_taken, caption, width, height in images[ sub_tag ]:
						<% strippedLoc = image_location.split('/') %>
						<% imageLocation = "/images/" + strippedLoc[ len(strippedLoc) - 1 ] %>
						<img id = "${sub_tag}" class = "tag_preview_image" src = ${imageLocation} style="max-height: 100%; max-width: 100%; border: 5px solid black;">
					%endfor

				%except:
				%endtry

			%endfor

		</div>

		<div id = "tag_nav">
			<table>
				%for parent_tag, sub_tag in sub_tags:
					
					%try:				
						<% failure_point = images[sub_tag] %>
						<tr><td><a class = "tag" name="${sub_tag}" href="/p/${main_tag}/${sub_tag}">${sub_tag}</a></td></tr>
					%except:
					%endtry

				%endfor

				<tr><td><a href="/">Back</a></td></tr>
			</table>
		</div>

%elif display_type == "Sub":
	<div id = "container">
		<div id = "site_title">${parent_sub_tag}</div>

		<div id = "tag_preview">
			%for misc_parent_tag, misc_sub_tag, misc_event_tag in event_tags:
				
				%try:
					%for id, name, image_location, thumb_location, date_added, date_taken, caption, width, height in images[ misc_event_tag ]:
						<% strippedLoc = image_location.split('/') %>
						<% imageLocation = "/images/" + strippedLoc[ len(strippedLoc) - 1 ] %>
						<img id = "${misc_event_tag}" class = "tag_preview_image" src = ${imageLocation} style="max-height: 100%; max-width: 100%; border: 5px solid black;">
					%endfor						
				%except:					
				%endtry

			%endfor

			%try:
				%for id, name, image_location, thumb_location, date_added, date_taken, caption, width, height in misc_images[ "Misc" ]:
					<% strippedLoc = image_location.split('/') %>
					<% imageLocation = "/images/" + strippedLoc[ len(strippedLoc) - 1 ] %>
					<img id = "Misc" class = "tag_preview_image" src = ${imageLocation} style="max-height: 100%; max-width: 100%; border: 5px solid black;">
				%endfor
			%except:
			%endtry
		</div>

		<div id = "tag_nav">
			<table style="font-size: 35px; width: 300px;">
				%for misc_parent_tag, misc_sub_tag, misc_event_tag in event_tags:
					
					%try:				
						<% failure_point = images[misc_event_tag] %>
						<tr><td><a class = "tag" name="${misc_event_tag}" href="/p/${parent_main_tag}/${parent_sub_tag}/${misc_event_tag}">${misc_event_tag}</a></td></tr>
					%except:						
					%endtry

				%endfor

				%try:
					<% failure_point = misc_images["Misc"] %>
					<tr><td><a class = "tag" name="Misc" href="/p/${parent_main_tag}/${parent_sub_tag}/Misc">Misc</a></td></tr>
				%except:
				%endtry
				<tr><td><a href="/p/${parent_main_tag}">Back</a></td></tr>
			</table>
		</div>


%elif display_type == "Event":
	<div id = "modal"></div>
	<div id = "container">
		<!-- Make the I I I have smaller spacing for Joe !-->
		%if event_tag == "I I I":
			<div id = "site_title" style="letter-spacing: -6px">${event_tag}</div>
		%else:
			<div id = "site_title">${event_tag}</div>
		%endif
	
		<div id = "image_previews">						
			<!-- Display a jQuery UI Tooltip only if the text is cutoff !-->
			%for image_id, name, thumb_location in images:
				%try:
					<% strippedLoc = thumb_location.split('/') %>
					<% thumbLocation = "/thumbnails/" + strippedLoc[ len(strippedLoc) - 1 ] %>	

					%if len(name) > 20:
					<table class = "nav_image" title = "${name}">
					%else:
					<table class = "nav_image">
					%endif

						<tr><td>
							<img id = "${image_id}" src = ${thumbLocation} style="width: 150px; height: 125px; border: 5px solid black;">
						</tr></td>

						<th align="center">${name[0:20]}
						%if len(name) > 20:
							...
						%endif
						</th>					

					</table>					
				%except:
				%endtry
			%endfor	

			<div id = "image_nav">
				<a> Prev Images </a>				
				<a style="margin-left: 15%" href="/p/${event_main_tag}/${event_sub_tag}"> - Back -  </a>
				<a style ="margin-left: 15%">Next Images</a>
			</div>	

		</div>				
		
	
%endif

	</div>

</body>

</HTML>